/*! auralizr 2014-01-19 */
!function(){function a(){var a=this;return this.userMediaSupport=!1,this.isMicEnabled=!1,this.irArray={},this.startRequest=!1,window.AudioContext=window.AudioContext||window.webkitAudioContext,this.audioContext=new AudioContext,this.convolver=this.audioContext.createConvolver(),navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,navigator.getUserMedia?void navigator.getUserMedia({audio:!0},function(b){a.isMicEnabled=!0;var c=a.audioContext.createMediaStreamSource(b);c.connect(a.convolver),a.startRequest&&a.start()},function(){console.log("Error getting audio stream from getUserMedia")}):(console.log("Unfortunately, your browser doesn't support the getUserMedia API needed for this expiriment. Try using Chrome instead"),null)}a.prototype.load=function(a,b,c){var d=this,e=new XMLHttpRequest;e.open("GET",a,!0),e.responseType="arraybuffer",e.onload=function(){d.irArray[b]=d.audioContext.createBuffer(e.response,!1),c(b)},e.send()},a.prototype.isReady=function(a){return this.isMicEnabled&&this.irArray.hasOwnProperty(a)&&void 0!==this.irArray[a]},a.prototype.use=function(a){this.irArray.hasOwnProperty(a)&&void 0!==this.irArray[a]&&(this.convolver.buffer=this.irArray[a])},a.prototype.start=function(){return this.startRequest=!0,this.isMicEnabled?null===this.convolver.buffer?void console.log("Couldn't start the auralizr. Buffer is not loaded"):(console.log("Starting auralizr"),this.convolver.connect(this.audioContext.destination),void(this.startRequest=!1)):void console.log("Couldn't start the auralizr. Mic is not enabled")},a.prototype.stop=function(){this.startRequest=!1,console.log("Stopping auralizr"),this.convolver.disconnect()},"undefined"==typeof module?window.auralizr=a:module.exports=a}();